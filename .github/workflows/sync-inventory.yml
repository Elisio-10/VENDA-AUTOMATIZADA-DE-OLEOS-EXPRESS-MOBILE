name: Sync Inventory
on:
  push:
    paths:
      - 'data/inventory.json'
jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Validate JSON
        run: |
          node -e "JSON.parse(require('fs').readFileSync('data/inventory.json','utf8'))"
      - name: Commit & Push (no-op if already pushed)
        run: |
          git config user.name "bot"
          git config user.email "bot@example.com"
          git add data/inventory.json
          git commit -m "Atualiza estoque" || echo "Nada a commitar"
          git push
